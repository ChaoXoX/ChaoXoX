---
title: "微调笔记"
date: 2025-01-05
tags: [Fine-tuning, Data]
---

# 微调笔记

## 数据准备
- 只留高质量样本：指令清晰、答案确定、无敏感信息。
- 去重与去噪：哈希去重、语言检测、脏词过滤。
- 模板化：保持 system/user/assistant 一致，方便批处理。
- 偏好/奖励数据：成对或多候选，支撑 DPO/ORPO。

## 训练配置
- 轻量：LoRA / QLoRA，首选 int4/8，节省显存。
- 超参：学习率小步长、较大 warmup；梯度裁剪防爆。
- 评估集：覆盖关键能力与安全性场景。

## 监控与早停
- 关注 loss 曲线的平滑程度；防止在小数据集过拟合。
- 指标：准确率/ROUGE/BLEU（按场景），以及人工 spot check。
- 早停策略：验证集无提升多轮后停止。

## 上线前检查
- 与未微调版本对比，确保有“净提升”。
- 成本与延迟：检查推理设备、量化方案、并发策略。
- 回滚预案：保留微调前权重与提示，支持快速切换。
